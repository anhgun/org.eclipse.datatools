<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.0"?>
<plugin
   id="org.eclipse.datatools.sqltools.sqleditor"
   name="Eclipse Data Tools Platform SQL Editor"
   version="0.7.0.200602242"
   provider-name="eclipse.org"
   class="org.eclipse.datatools.sqltools.sqleditor.internal.SQLEditorPlugin">

   <extension-point id="texthover" name="SQL Editor Text Hover" schema="schema/texthover.exsd"/>

   <runtime>
      <library name="sqleditor.jar">
         <export name="*"/>
      </library>
   </runtime>

   <requires>
      <!-- Eclipse Platform and Workbench plugins -->
      <import plugin="org.eclipse.core.resources"/>
      <import plugin="org.eclipse.core.runtime"/>
      <import plugin="org.eclipse.jface.text" export="true"/>
      <import plugin="org.eclipse.ui"/>
      <import plugin="org.eclipse.ui.editors" export="true"/>
      <import plugin="org.eclipse.ui.ide"/>
      <import plugin="org.eclipse.ui.views" export="true"/>
      <import plugin="org.eclipse.ui.workbench.texteditor" export="true"/>
      
      <!-- Eclipse Web Tools Project plugins -->
      <import plugin="org.eclipse.datatools.modelbase.sql"/>
      <import plugin="org.eclipse.datatools.connectivity"/>
      <import plugin="org.eclipse.datatools.modelbase.dbdefinition"/>
      <import plugin="org.eclipse.datatools.sqltools.editor.core"/>
      <import plugin="org.eclipse.datatools.sqltools.sql"/>
      <import plugin="org.eclipse.datatools.sqltools.result" export="true"/>
      <import plugin="org.eclipse.debug.core"/>
      <import plugin="org.eclipse.debug.ui"/>
      <import plugin="com.ibm.icu"/>
   </requires>

   <!-- Register the SQL Editor and the Action Contributor class for the SQL Editor. -->
   <extension
         point="org.eclipse.ui.editors">
      <editor
            id="org.eclipse.datatools.sqltools.sqleditor.SQLEditor"
            name="%sqlEditorName"
            icon=""
            class="org.eclipse.datatools.sqltools.sqleditor.SQLEditor"
			contributorClass="org.eclipse.datatools.sqltools.sqleditor.internal.SQLEditorActionContributor">
      </editor>
   </extension>

<!-- Register the DocumentSetupParticipant class for the SQL Editor. -->
<!-- Note: In order to make the SQL Editor more reusable, the DocumentSetupParticipant 
     is set up in the main SQL Editor class rather than here.
   <extension
         point="org.eclipse.core.filebuffers.documentSetup"
         id="SQLEditorDocumentSetupParticipant"
         name="%documentSetupParticipantName">
      <participant
            extensions="%sqlEditorFileExtensions"
            class="org.eclipse.datatools.sqltools.sqleditor.SQLEditorDocumentSetupParticipant">
      </participant>
   </extension>
-->

   <!-- Register a factory for recreating SQLEditorFileEditorInput objects when
        the Workbench is restarted. -->
   <extension 
      point = "org.eclipse.ui.elementFactories"> 
         <factory 
            id ="org.eclipse.datatools.sqltools.sqleditor.SQLEditorInputFactory" 
            class="org.eclipse.datatools.sqltools.sqleditor.SQLEditorInputFactory"> 
         </factory> 
   </extension> 

   <!-- perspectives -->      
   <extension
         point="org.eclipse.ui.perspectives">
      <perspective
            name="Database Development"
            icon="icons/DB_dev_perspective.gif"
            class="org.eclipse.datatools.sqltools.sqleditor.perspectives.EditorPerspective"
            id="org.eclipse.datatools.sqltools.sqleditor.perspectives.EditorPerspective">
      </perspective>
   </extension>
   
    <!-- next are how to hook DTP SQL Editor perspective/actions with other perspectives/actions of eclipse -->
    <extension point="org.eclipse.ui.perspectiveExtensions"> 
        <!-- extension to the DTP editor perspective -->
        <perspectiveExtension
             targetID="org.eclipse.datatools.sqltools.sqleditor.perspectives.EditorPerspective">
	    	 <actionSet
               id="org.eclipse.debug.ui.breakpointActionSet">
             </actionSet>


             <!-- Add View Shortcuts !-->
            <viewShortcut id="org.eclipse.datatools.connectivity.DataSourceExplorerNavigator" />
            <viewShortcut id="org.eclipse.datatools.sqltools.result.resultView" />
                        
            <!-- Add Perspective shortcuts !-->
            <perspectiveShortcut id="ConfigPerspective" />
            <perspectiveShortcut id="org.eclipse.datatools.sqltools.debugger.perspectives.DebuggerPerspective" />
                  
        </perspectiveExtension>

    </extension>

   <extension
         point="org.eclipse.ui.contexts">
      <context
            name="%context.editingSQL.name"
            description="%context.editingSQL.description"
            parentId="org.eclipse.ui.textEditorScope"
            id="org.eclipse.datatools.sqltools.SQLEditorScope">
      </context>
   </extension>
   
    <extension
         point="org.eclipse.ui.commands">
      <category
            name="%category.datatools.name"
            description="%category.datatools.description"
            id="org.eclipse.datatools.sqltools.sqleditor.category">
      </category>
      <command
            categoryId="org.eclipse.datatools.sqltools.sqleditor.category"
            name="%DatabaseManagement.command.execute"
            id="org.eclipse.datatools.sqltools.sqleditor.ExecuteSQLAction"/>
      <command
            categoryId="org.eclipse.datatools.sqltools.sqleditor.category"
            name="%DatabaseManagement.command.execute.select"
            id="org.eclipse.datatools.sqltools.sqleditor.ExecuteSelectionAction"/>
    </extension>
    
    <extension
         point="org.eclipse.ui.bindings">
      <!--  win32:  M1=CTRL,    M2=SHIFT, M3=ALT, M4=-
            carbon: M1=COMMAND, M2=SHIFT, M3=ALT, M4=CTRL -->
      <key
            sequence="M1+M3+X"
            contextId="org.eclipse.datatools.sqltools.SQLEditorScope"
            commandId="org.eclipse.datatools.sqltools.sqleditor.ExecuteSQLAction"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"/>
      <key
            sequence="M3+X"
            contextId="org.eclipse.datatools.sqltools.SQLEditorScope"
            commandId="org.eclipse.datatools.sqltools.sqleditor.ExecuteSelectionAction"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"/>
    </extension>
    
</plugin>
